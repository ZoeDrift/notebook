# 历年题
```
23-24  
1.商店选址  
2.最短路径分析。货车依次经过每一个商场的最短路径。  

22-23  
1.医院选址：六个备选点中选择两个位置建立医院，需要考虑与其他已有医院位置（包括新建的）、地形、人口密度。写出需要的数据与数据模型与 ArcMap 的操作步骤。  
2.亚运会场馆可达性分析与制图。提供杭州区划图(hangzhou.jpg)，杭州道路网(road.shp)和包含亚运会场馆名称与经纬度坐标的 Excel。写出 ArcMap 的操作步骤   

21-22  
1.商场选址问题，需要考虑地形、周围配套设施状况、人口分布状况和与其他商场的距离。写出需要数据和数据类型，并写出ArcMap的基本操作流程和各参数的权重。
2.网络分析题。分析杭州市体育馆与道路网的通达度，将按照到达体育馆的时间将杭州市分为易达、可到达、未惠及区。已有的数据文件为杭州市道路网“road.shp”、杭州市行政区划“Hangzhou.jpg”和杭州市体育馆分布的excel表格（内含经纬度坐标）。  

20-21  
1.分析最适宜种植区域  
2.先确定需要用到的数据及数据类型，进行学校的最佳选址过程分析，给出权重分配  
```

!!! info "注意"
    24-25的懒得打了，98上都有。注意这次考的网络分析和课堂上讲的最短路径分析不太一样。
    

# lab1
## 地理数据库的创建与数据入库
1. 创建数据库
   1. 数据库创建：【视图】|【目录窗格】-工程文件夹-(右键)-【新建】|【文件地理数据库】
   2. 创建要素数据集：
   * 【地图】-【添加数据】
   * 选中.gbd，【新建】-【要素数据集】
   * 【创建要素数据集】窗格中输入要素数据集的名称“Basic”，在【坐标系】选项栏中选择“水系”图层，即选择其对应的“GCS2000_GK_117E”坐标系，完成要素数据集的创建。
   3. 创建要素类
......

---

# lab2-矢量数据处理
> 空间插值、掩膜
1. 数据导入
   1. 导入.csv
   2. 基于表创建点->XY表创建点->经度、维度，GCS_WGS_1984
   3. 工具箱->要素类转shapefile
2. 空间插值
   1. 工具箱-Spatial Analyst工具-插值分析
   2. 自然邻域法、克里金法、反距离权重法、样条分析法
3. 掩膜方两种方法
   1. 工具箱-Spatial Analyst-提取分析-按掩膜提取
   2. 在进行空间插值时，“环境”对话框中的栅格分析选项下选择对应图层

---

# lab3-栅格数据处理
1. 图像分类
   1. 非监督-ISO聚类：Spatial Analyst工具-多元分析-Iso聚类分监督分类
   2. 监督-最大似然法分类：
      1. 影响-分类工具-训练样本管理器
      2. 调整方案，并在遥感图像上绘制每一类的样本，另存为，保存训练样本
      3. Spatial Analyst工具-多元分析-创建特征文件-输入栅格数据或要素样本数据-刚保存的训练样本
      4. Spatial Analyst工具-多元分析-最大似然分类-输入特征文件-刚保存的特征文件
2. 重分类
   1. Spatial Analyst工具-重分类-重分类
3. 指数计算
   1. 计算植被指数NDVI
   Spatial Analyst工具-地图代数-栅格计算器-地图代数表达式
   2. 邻域统计
   Spatial Analys工具-邻域分析-焦点统计-输入栅格-NDVI

## ==案例学习-学校选址==
### 需要的数据
* landuse
* dem
* pub_sites
* school
### 导入数据
1. 新建工程，加载数据
### 分析
2. 从DEM数据提取坡度数据集
    Spatial Analyst工具-表面分析-坡度-输入栅格“dem.tif”得到坡度数据集
3. 从公共设施数据“pub_sites”提取公共设施直线距离数据
    Spatial Analyst工具-距离-欧氏距离，输入栅格或要素元数据-“pub_sites”，环境-处理范围同“pub_sites，生成“dis_public.tif”
4. 从现有学校位置数据“school”提取学校直线距离数据
    Spatial Analys工具-距离-欧式距离
### 重分类
5. 重分类坡度数据集
   * 采用等间距分级把坡度分为10级，平坦10陡峭1  
   * Spatial Analyst工具-重分类-重分类-输入栅格“slope.tif”，重分类字段“VALUE”  
   * 修改重分类映射表，方法“相等间隔”，类“10”
   * 输出“reclass_slope.tif”  
6. 重分类公共设施直线距离数据集
   * 等间距分级分为10级，距公共设施近为10，远为1
   * Spatial Analyst工具-重分类-重分类-输入栅格“dis_public.tif”，重分类字段“VALUE”  
   * 修改重分类映射表，方法“相等间隔”，类“10”
   * 输出“reclass_dis_public.tif” 
7. 重分类学校直线距离数据集
   * 距现有学校最远10，最近1
   * 同上，输出“reclass_dis_schoole.tif”
8. 重分类土地利用数据集
   * 不适合在湿地、水体分布区，将这些类别剔除
   * Spatial Analyst工具-重分类-重分类-输入栅格“landuse.tif”，重分类字段“type”
   * 删除、赋值，输出为“reclass_landuse.tif”
### 函数运算
9. 适宜区分析
    * Spatial Analyst工具-地图代数-栅格计算器-地图代数表达式
### 可视化
10. 符号化
    唯一值渲染，灰度条带

---

# lab4-空间分析
## ==市区择房分析-邻域分析、叠置分析==
### 数据
* 城市市区交通网络图
* 商业中心分布图
* 名牌高中分布图
* 名胜古迹分布图
### 操作
1. 添加数据
2. 主干道噪声带范围的建立
   * 按属性选择-Where“Type”-“ST”属性值，双击添加到SQL算式表中，把市区的主要道路选择出来
   * 工具箱-Spatial Analyst工具-Proximity【邻域分析】-Buffer（缓冲区）-距离“200”，单位“米”，融合类型“将全部输出要素融合为一个要素”
3. 商业中心影响范围建立
   * 工具箱-Spatial Analyst工具-Proximity【邻域分析】-Buffer（缓冲区）-距离“YUZHI”。”融合类型“不融合”
   * Data Management Tools->Generalization->Dissolve【可能是数据管理工具 → 泛化 → 融合】将缓冲区融合
4. 名牌高中的影响范围建立
5. 名胜古迹的影响范围建立
6. 叠置分析
   * Analysis Tools->Overlay，Intersct【可能是 分析工具->叠置->相交】，输入图层
7. 擦除
   * Analysis Tools->Overlay，Erase 工具，输入参数（主干道）
8. 分级
   * 打开商业中心、名牌高中、名胜古迹影响范围的缓冲区属性列表，分别添加market、school、famous字段，赋值为1，主干道缓冲区添加noise字段，赋值为-1
     1.  添加字段，设置为短整型、数值
     2.  进行定义投影，并保存
     3.  赋值
9. 叠加评价
   * 打开Union工具（联合工具），输入参数，得到结果
   * 打开联合生成文件的属性表，删除无效字段
   * 添加短整型字段class，运算公式为market+voice+school+famous
10. 符号化
    用class字段

回去再补这个没有汉化版的蚌埠住了  

# lab5-地图制图与地理信息可视化
1. 地理配准
方法一：使用控制点进行配准  
* 导入数据，影响-地理配准-添加控制点
* 分别选择地图上四个角-在DMS中显示坐标-输入实际坐标
方法二：使用控制点对进行配准
* 导入数据
* 添加控制点-关闭当前图层只显示底图-找到底图位置相同的点，再次点击
* 取多个控制点对
2. 空间数据符号化
   1. 矢量数据
   符号系统-主符号系统
   2. 栅格数据
      1. Spatial Analyst-表面分析-山体阴影-输入栅格“DEM_PRJ”创建地貌渲染
   3. 符号系统导入导出
   共享-另存为图层文件-.lyrx
3. 地图标注-标注
   1. 标注选项卡-标注 启用标注
   2. 标注分类-字段“乡镇名”，文本符号-“居民区”-标注放置“地块”
4. 地图标注-注记
   1. 右键-转换注记-将标注转换为注记
   2. 设置-转换、要素图层、输出地理数据库、输出图层，勾选-创建关联要素注记
5. 地图编制
   1. 布局制作
   * 插入-新建布局，插入-地图框
   * 激活移动和缩放地图
   2. 添加和修改地图整饰要素
   * 插入-平直文本、指北针、比例尺
   * 创建一个包含布局大小的shapefile文件，置于底层作为地图的底色
   3. 输出 共享-导出布局

---

# lab6-网络分析、水文分析
## 网络分析-最短路径
交通网络分析包括数据准备、网络构建、网络分析三个基本环节。  
### 创建网络数据集
1. 导入数据
2. Net Analyst工具-网络数据集-创建网络数据集
3. 目标数据集“Transportation”要素数据集；源要素类中勾选‘Streets’
4. 运行。Transporation->Transportation_ND
### 设置网络数据集属性
先将网络数据集从地图中移除，再进行修改网络数据集属性的操作。
1. 修改网络数据集的源设置
   在目录中选中网络数据集，右键【属性】，【添加/移除源】完成网络数据集中增加表要素类的修改
2. 设置垂直连通性
   【源设置】-【垂直连通性】中设置两个要素类的【高程字段】
3. 设置组连通性
   【源设置】-【组连通性】中设置【策略】、【组】
4. 设置成本
   1. 【交通流量属性】-【成本】设置成本字段（时间、距离）
   2. 利用赋值器设置成本属性
   3. 设置转弯成本：选择时间成本字段“时间”，在【赋值器】-【转弯】组中设置转弯成本，双击【值】-【转弯类别】-设置【左转弯】和【调头】
   4. 设置出行模型【交通流量属性】-【出行模式】-【机动车行驶】
### 构建网络
【构建网络】工具-【输入网络数据集】“Transporation_ND”
### 网络分析
1. 创建路径分析图层
   1. 【分析】选项卡-【网络分析】-【路径】
2. 添加路径分析对象
   1. 通过【创建】-【创建要素】，选择【路径：停靠点】，按照编辑要素的方式添加停靠点
3. 设置路径分析参数
   1. 【路径图层】-【出行设置】中设置经过各个停靠点的路径顺序；在【输出几何】设置路径输出的几何形式【沿网格】
4. 执行路径分析任务

## 水文分析-DEM分析
### 流向分析
1. 流向分析
   1. 【Spatia Analyst工具】-【水文分析】-【流向】工具
   2. 【输入表面栅格】“DEM30m”，【输出流向栅格】“FlowDirection”，【流向类型】“D8”
2. 识别汇（洼地）
   1. 【水文分析】-【汇】
   2. 【输入D8流向栅格】“FlowDirection”，【输出栅格】“Sink”
>我认为这个地方可以省略1、2
3. 填洼（Fill）
   1. 【水文分析】-【填洼】
   2. 【输入表面栅格】“DEM30”，【输出表面栅格】“Fill_dem30m”
4. 利用无洼地的栅格数据进行流向分析
   1. Spatia Analyst工具】-【水文分析】-【流向】工具
   2. 【输入表面栅格】“Fill_dem30m”，【输出流向栅格】“FlowDirection_Fill”，【流向类型】“D8”
### 水流长度计算
1. 【水文分析】-【水流长度】
2. 【输入栅格】-“FlowDirection_Fill”，【测量方向】“上游”。【输出栅格】“Flowlen_Upstream”
### 流量计算
1. 【水文分析】-【流量】
2. 【输入流向栅格】“FlowDirection_Fill”，【输入流向类型】“D8”，【输出栅格】“FlowAcc_Flow”
### 河网提取
1. 栅格河网生成
   1. 【Spatial Analyst工具】-【地图代数】-【栅格计算器】
   2. 设置【地图表达式】FlowAcc_Acc>3200，【输出栅格】“RiverNetwork”
2. 河流链生成
   1. 【水文分析】-【河流链】
   2. 【输入流栅格】“RiverNetwork”，【输入流向栅格】“FlowDirection_Fill”，【输出栅格】“RiverLink”
3. 栅格河流矢量化
   1. 【水文分析】-【栅格河流矢量化】
   2. 【输入河流栅格】“RiverLink”，【输入流向栅格】“FlowDirection_Fill”，【输出折线要素】“RiverNetwork_Shp”
4. 河网平滑
   1. 【制图工具】-【制图综合】-【平滑线】
   2. 【输入要素】“RiverNetwork_Shp”，【输出要素】“RiverNetwork_Shp_Smooth”
   3. 【平滑算法】默认。【平滑容差】150
   4. 【处理拓扑错误】“解决拓扑错误”
5. 河网分级
   1. 【水文分析】-【河网分级】
   2. 【输入流栅格】“RiverNetwork”，【输入流向栅格】“FlowDirection_Fill”
   3. 【河网分级方法】“放射状/发射状”
### 流域分析
1. 集水区
   1. 【水文分析】-【集水区】
   2. 设置【输入D8流向栅格】“FlowDirection_Fill”
   3. 【输入栅格数据或要素倾泄点数据】选择“PourPint”点要素类，；【倾泻点字段】选择“FID”
2. 盆域
   1. 【水文分析】-【盆域】
   2. 设置【输入D8流向栅格】“FlowDirection_Fill”